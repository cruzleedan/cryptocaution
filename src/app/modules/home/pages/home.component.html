<!-- START IMAGE CONTAINER -->
<section class="banner-container">
    <div class="desc">
        <div class="desc-title">Welcome to Cryptocaution</div>
        <!-- <div class="desc-details">Reviews of Cryptocurrencies and Exchanges</div> -->
    </div>
    <div fxLayout="row" fxLayoutAlign="center" class="search-bar-container">
        <div fxFlex="30%" fxFlex.xs="100%">
            <app-search-bar></app-search-bar>
        </div>
    </div>
    <div class="post-desc">
        <!-- Your quality reviews help new cryptocurrency users decide on which cryptocurrency to invest and  where to safely buy and trade coins. -->
    </div>
</section>
<!-- END IMAGE CONTAINER -->
<section class="body">
    <div fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="20px" fxLayoutAlign="center stretch">
        <div fxFlex="1 1 30%">
            <div class="col-title">TOP</div>
            <app-loading-spinner *ngIf="loadingTop"></app-loading-spinner>
            <mat-card *ngFor="let entity of topEntities || []" class="vertical-entity-card">
                <div>
                    <mat-card-title>
                        <a [routerLink]="'/entity/'+entity.id">
                            {{ entity.name }}
                        </a>
                    </mat-card-title>
                    <div fxLayout="row">
                        <star-rating size="medium" [starType]="'svg'" [rating]="entity.rating" [labelText]="entity.rating | ratingLabel" labelPosition="right"></star-rating>
                    </div>
                    <app-read-more [text]="entity.desc" [maxLength]="100" [href]="'/entity/'+entity.id"></app-read-more>
                </div>
                <mat-divider [inset]="true"></mat-divider>
                <div fxLayout="row" fxLayoutAlign="end" class="write-btn-cont">
                    <a mat-stroked-button [routerLink]="'/entity/'+entity.id+'/review/new'" color="primary" class="mat-small">Write a review</a>
                </div>
                <div *ngIf="entity.Reviews && entity.Reviews.length">
                    <div *ngFor="let review of entity.Reviews" fxLayout="column" class="review-cont">
                        <div fxLayout="row">
                            <div mat-card-avatar>
                                <img [src]="baseUrl+'/avatar/'+review.User.id+'/'+review.User.avatar" alt="Avatar" onerror="this.onerror=null;this.src='/assets/images/avatars/avatar.png'" width="100%" height="100%">
                            </div>
                            <div>
                                <div class="star-cont">
                                    <star-rating size="small" [starType]="'svg'" [rating]="review.rating"></star-rating>
                                </div>
                                <div class="reviewer-name">{{review.User.username || review.User.email }} wrote</div>
                            </div>
                        </div>
                        <div>
                            <p class="review">“{{review.review}}”</p>
                        </div>
                    </div>
                </div>
            </mat-card>
        </div>
        <div fxFlex="1 1 30%">
            <div class="col-title">TRENDING</div>
            <app-loading-spinner *ngIf="loadingTrending"></app-loading-spinner>
            <mat-card *ngFor="let entity of trendingEntities || []" class="vertical-entity-card">
                <div>
                    <mat-card-title>
                        <a [routerLink]="'/entity/'+entity.id">
                            {{ entity.name }}
                        </a>
                    </mat-card-title>
                    <div fxLayout="row">
                        <star-rating size="medium" [starType]="'svg'" [rating]="entity.rating" [labelText]="entity.rating | ratingLabel" labelPosition="right"></star-rating>
                    </div>
                    <app-read-more [text]="entity.desc" [maxLength]="100" [href]="'/entity/'+entity.id"></app-read-more>
                </div>
                <mat-divider [inset]="true"></mat-divider>
                <div fxLayout="row" fxLayoutAlign="end" class="write-btn-cont">
                    <a mat-stroked-button [routerLink]="'/entity/'+entity.id+'/review/new'" color="primary" class="mat-small">Write a review</a>
                </div>
                <div *ngIf="entity.Reviews && entity.Reviews.length">
                    <div *ngFor="let review of entity.Reviews" fxLayout="column" class="review-cont">
                        <div fxLayout="row">
                            <div mat-card-avatar>
                                <img [src]="baseUrl+'/avatar/'+review.User.id+'/'+review.User.avatar" alt="Avatar" onerror="this.onerror=null;this.src='/assets/images/avatars/avatar.png'" width="100%" height="100%">
                            </div>
                            <div>
                                <div class="star-cont">
                                    <star-rating size="small" [starType]="'svg'" [rating]="review.rating"></star-rating>
                                </div>
                                <div class="reviewer-name">{{review.User.username || review.User.email }} wrote</div>
                            </div>
                        </div>
                        <div>
                            <p class="review">“{{review.review}}”</p>
                        </div>
                    </div>
                </div>
            </mat-card>
        </div>
        <div fxFlex="1 1 30%">
            <div class="col-title">RECENT</div>
            <app-loading-spinner *ngIf="loadingRecent"></app-loading-spinner>
            <mat-card *ngFor="let entity of recentEntities || []" class="vertical-entity-card">
                <div>
                    <mat-card-title>
                        <a [routerLink]="'/entity/'+entity.id">
                            {{ entity.name }}
                        </a>
                    </mat-card-title>
                    <div fxLayout="row">
                        <star-rating size="medium" [starType]="'svg'" [rating]="entity.rating" [labelText]="entity.rating | ratingLabel" labelPosition="right"></star-rating>
                    </div>
                    <app-read-more [text]="entity.desc" [maxLength]="100" [href]="'/entity/'+entity.id"></app-read-more>
                </div>
                <mat-divider [inset]="true"></mat-divider>
                <div fxLayout="row" fxLayoutAlign="end" class="write-btn-cont">
                    <a mat-stroked-button [routerLink]="'/entity/'+entity.id+'/review/new'" color="primary" class="mat-small">Write a review</a>
                </div>
                <div *ngIf="entity.Reviews && entity.Reviews.length">
                    <div *ngFor="let review of entity.Reviews" fxLayout="column" class="review-cont">
                        <div fxLayout="row">
                            <div mat-card-avatar>
                                <img [src]="baseUrl+'/avatar/'+review.User.id+'/'+review.User.avatar" alt="Avatar" onerror="this.onerror=null;this.src='/assets/images/avatars/avatar.png'" width="100%" height="100%">
                            </div>
                            <div>
                                <div class="star-cont">
                                    <star-rating size="small" [starType]="'svg'" [rating]="review.rating"></star-rating>
                                </div>
                                <div class="reviewer-name">{{review.User.username || review.User.email }} wrote</div>
                            </div>
                        </div>
                        <div>
                            <p class="review">“{{review.review}}”</p>
                        </div>
                    </div>
                </div>
            </mat-card>
        </div>
    </div>
</section>
